# ATMSystem

![.NET](https://img.shields.io/badge/.NET-8.0-blue)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-15-blue)
![Build](https://img.shields.io/badge/build-passing-brightgreen)

---

## 💡 Tagline
**Secure, Reliable, and API-Driven ATM System**

---

## 📖 Project Description

**ATMSystem** is a modern, RESTful ATM backend built with **C# & .NET**, providing secure banking operations via APIs.  
It supports management of **customers, accounts, cards, ATMs**, and financial **transactions** (deposit/withdraw).  

**Key Technologies:**
- **ASP.NET Core Web API** – RESTful endpoints
- **EF Core (Code-First)** – Database migrations
- **Repository Pattern** – Clean separation of concerns
- **PostgreSQL** – Persistent, ACID-compliant storage
- **Service Layer** – Handles all business logic
- **Transaction validation** – PIN checks, balance validation, and account verification

---

## 🛠 Features

| Feature | Description |
|---------|-------------|
| Customer Management | Create and retrieve customer data |
| Account Management | Create and delete bank accounts |
| Card Management | Issue and delete bank cards linked to accounts |
| ATM Management | Create, update, delete, and retrieve ATMs |
| Transactions | Deposit and withdraw using card PINs at ATMs |
| Validation & Error Handling | Proper HTTP responses for invalid requests |
| API-Driven | Fully RESTful endpoints for easy integration |
| Repository Pattern | Clean architecture with separation of data access and business logic |

---

## 🏗 System Architecture

[API Client / Frontend]
│
▼
[Controllers / API Endpoints]
│
▼
[Services Layer]
│
▼
[Repositories / EF Core]
│
▼
[PostgreSQL Database]

markdown
Copy
Edit

**Controllers:**
- `CustomerController` – Create/Get customers
- `AccountController` – Create/Delete accounts
- `CardController` – Create/Delete cards
- `AtmsController` – CRUD operations for ATMs
- `TransactionsController` – Deposit/Withdraw transactions

---

## ⚙ Installation & Setup

### Prerequisites
- [.NET 8 SDK](https://dotnet.microsoft.com/download)
- [PostgreSQL 15](https://www.postgresql.org/download/)
- Visual Studio 2022 or later

### Steps
```bash
git clone https://github.com/NouranOsama/ATMSystem.git
cd ATMSystem
Create PostgreSQL database: atm_system

Copy appsettings.example.json → appsettings.json and configure your connection string:

json
Copy
Edit
{
  "ConnectionStrings": {
    "DefaultConnection": "Host=localhost;Database=atm_system;Username=YOUR_USERNAME;Password=YOUR_PASSWORD"
  }
}
Build the project:

bash
Copy
Edit
dotnet build
Apply EF Core migrations:

bash
Copy
Edit
dotnet ef database update
Run the API:

bash
Copy
Edit
dotnet run
The API will be available at https://localhost:5001 or http://localhost:5000.

🖥 Usage
🧪 Test Cases (API Examples)
All IDs in requests/responses are auto-generated by the system. Use the IDs returned by previous requests in subsequent calls.

✅ First Test Case – Create Customer
Request

http
Copy
Edit
POST /api/customer
Content-Type: application/json

{
  "firstName": "Nouran",
  "lastName": "Osama",
  "email": "nouran@example.com"
}
Response

json
Copy
Edit
{
  "id": "{{generatedCustomerId}}",
  "firstName": "Nouran",
  "lastName": "Osama",
  "email": "nouran@example.com"
}
✅ Second Test Case – Create Account
Request

h
Copy
Edit
POST /api/account/create
Content-Type: application/json

{
  "customerId": "{{generatedCustomerId}}",
  "accountType": "Savings",
  "initialBalance": 1000
}
Response

json
Copy
Edit
{
  "accountNumber": "{{generatedAccountNumber}}",
  "customerId": "{{generatedCustomerId}}",
  "balance": 1000,
  "accountType": "Savings"
}
✅ Third Test Case – Create Card
Request

http
Copy
Edit
POST /api/card/create
Content-Type: application/json

{
  "accountNumber": "{{generatedAccountNumber}}",
  "pinCode": 1234
}
Response

json
Copy
Edit
{
  "cardId": "{{generatedCardId}}",
  "accountNumber": "{{generatedAccountNumber}}",
  "pinCode": "HashedPin"
}
✅ Fourth Test Case – Deposit
Request

http
Copy
Edit
POST /api/transactions/deposit
Content-Type: application/json

{
  "cardId": "{{generatedCardId}}",
  "pinCode": 1234,
  "atmId": "{{generatedAtmId}}",
  "amount": 500
}
Response

json
Copy
Edit
{
  "message": "Deposit successful"
}
✅ Fifth Test Case – Withdraw
Request

http
Copy
Edit
POST /api/transactions/withdraw
Content-Type: application/json

{
  "cardId": "{{generatedCardId}}",
  "pinCode": 1234,
  "atmId": "{{generatedAtmId}}",
  "amount": 200
}
Response

json
Copy
Edit
{
  "message": "Withdrawal successful"
}
✅ Sixth Test Case – Delete Account
Request

http
Copy
Edit
DELETE /api/account/{{generatedAccountNumber}}
Response

css
Copy
Edit
204 No Content
✅ Seventh Test Case – Delete Card
Request

http
Copy
Edit
DELETE /api/card/{{generatedCardId}}
Response

css
Copy
Edit
204 No Content
✅ Eighth Test Case – Create ATM
Request

http
Copy
Edit
POST /api/atms
Content-Type: application/json

{
  "location": "Main Branch",
  "cashCapacity": 10000
}
Response

json
Copy
Edit
{
  "atmId": "{{generatedAtmId}}",
  "location": "Main Branch",
  "cashCapacity": 10000
}
✅ Ninth Test Case – Get All ATMs
Request

h
Copy
Edit
GET /api/atms
Response

json
Copy
Edit
[
  {
    "atmId": "{{generatedAtmId}}",
    "location": "Main Branch",
    "cashCapacity": 10000
  }
]
🔒 Security Considerations
PIN Validation – Transactions require correct card PIN

Transaction Validation – Checks balance, card, and ATM existence

Error Handling – Proper HTTP status codes: 400, 404, 204

Repository & Service Separation – No direct DB access from controllers

PostgreSQL ACID Compliance – Reliable storage with transaction safety
